<!DOCTYPE html>
<html>
<head>
  <title>Social Handle Checker</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #888; padding: 6px; }
    th { background: #eee; }
    .true { color: green; }
    .false { color: red; }
  </style>
</head>
<body>

<h1>Handle Availability Checker</h1>

<input type="file" id="fileInput" accept=".txt,.csv,.xlsx" />
<button onclick="process()">Check</button>

<div id="output"></div>

<script>
async function process() {
  const file = document.getElementById("fileInput").files[0];
  if (!file) return alert("Upload a file first");

  let text = await file.text();
  // Simple split for .txt / .csv
  let names = text.split(/\r?\n/).map(s => s.trim()).filter(Boolean);

  const res = await fetch("/api/check", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ names }),
  });

  const data = await res.json();
  showTable(data.results);
}

function showTable(data) {
  let html = `
    <table>
      <tr>
        <th>Name</th>
        <th>Instagram</th>
        <th>YouTube</th>
        <th>X</th>
        <th>LinkedIn</th>
      </tr>`;
  data.forEach(r => {
    html += `
      <tr>
        <td>${r.name}</td>
        <td class="${r.instagram}">${r.instagram}</td>
        <td class="${r.youtube}">${r.youtube}</td>
        <td class="${r.x}">${r.x}</td>
        <td class="${r.linkedin}">${r.linkedin}</td>
      </tr>`;
  });
  html += `</table>`;
  document.getElementById("output").innerHTML = html;
}
</script>

</body>
</html>
